{% extends 'base.html' %}
{% load static %}
{% block title %}ورود | آیدین شاپ{% endblock %}

{% block content %}
<section class="login-shell">
    <div class="card container" id="login-card" data-view="signin">
        <nav class="card-nav">
            <ul>
                <li>
                    <button type="button" class="nav-btn active" data-view="signin">
                        <i class="ai-person-check"></i>
                        <span>ورود</span>
                    </button>
                </li>
                <li>
                    <button type="button" class="nav-btn" data-view="signup">
                        <i class="ai-person-add"></i>
                        <span>ثبت نام</span>
                    </button>
                </li>
            </ul>
            <span class="active-bar"></span>
        </nav>

        <div class="card-hero">
            <div class="card-hero-inner">
                <div class="card-hero-content signin">
                    <h2>خوش برگشتی!</h2>
                    <h3>برای ورود اطلاعات حساب را وارد کن.</h3>
                    <div class="card-hero-visual"></div>
                </div>
                <div class="card-hero-content signup">
                    <h2>اولین باره اینجایی؟</h2>
                    <h3>ثبت‌نام کن تا سفارش‌ها و پشتیبانی سریع داشته باشی.</h3>
                    <div class="card-hero-visual alt"></div>
                </div>
            </div>
        </div>

        <div class="card-form">
            <div class="forms">
                <div class="form-panel signin">
                    <form method="post" class="login-form">
                        {% csrf_token %}
                        {{ form.non_field_errors }}
                        <label for="{{ form.username.id_for_label }}">نام کاربری یا ایمیل</label>
                        {{ form.username }}
                        <label for="{{ form.password.id_for_label }}">رمز عبور</label>
                        {{ form.password }}
                        <button type="submit" class="btn btn-primary full">ورود</button>
                    </form>
                </div>
                <div class="form-panel signup">
                    <div class="signup-hint">
                        <h3>ثبت‌نام سریع</h3>
                        <p>اگر حساب نداری، با چند کلیک حساب جدید بساز.</p>
                        <a class="btn btn-light full" href="{% url 'signup' %}">رفتن به ثبت‌نام</a>
                        <a class="btn btn-outline full" href="{% url 'home' %}">بازگشت به صفحه اصلی</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', () => {
    const card = document.getElementById('login-card');
    const navButtons = document.querySelectorAll('.nav-btn');
    const activeBar = document.querySelector('.active-bar');
    const forms = document.querySelector('.forms');
    const heroInner = document.querySelector('.card-hero-inner');

    const updateView = (view) => {
        card.dataset.view = view;
        navButtons.forEach(btn => {
            const isActive = btn.dataset.view === view;
            btn.classList.toggle('active', isActive);
        });
        if (activeBar) {
            activeBar.style.top = view === 'signin' ? '33.33%' : '66.66%';
        }
        if (forms) {
            forms.style.top = view === 'signin' ? '0' : '-100%';
        }
        if (heroInner) {
            heroInner.style.top = view === 'signin' ? '0' : '-100%';
        }
    };

    navButtons.forEach(btn => {
        btn.addEventListener('click', () => updateView(btn.dataset.view));
    });

    updateView(card.dataset.view || 'signin');
});
</script>
{% endblock %}
