{% extends 'base.html' %}
{% load static %}

{% block title %}کاتالوگ تجهیزات | استیرا{% endblock %}

{% block content %}
<section class="section page-hero">
  <div class="container">
    <h1 class="section-title right">کاتالوگ تجهیزات</h1>
    <p class="section-subtitle right">دسته‌بندی‌ها و محصولات منتخب را بررسی کنید. برای قیمت و موجودی، با ما تماس بگیرید.</p>
  </div>
</section>

<section class="section">
  <div class="container">
    <h2 class="section-title right">دسته‌بندی‌ها</h2>
    <div class="categories-grid">
      {% for category in categories %}
        <a class="category-card" href="{% url 'catalog_category' category.slug %}">
          <strong>{{ category.name }}</strong>
          <span>مشاهده محصولات این دسته</span>
        </a>
      {% empty %}
        <p class="empty-text">هنوز دسته‌بندی‌ای ثبت نشده است.</p>
      {% endfor %}
    </div>
  </div>
</section>

<section class="section">
  <div class="container">
    <h2 class="section-title right">محصولات منتخب</h2>
    <form method="get" class="catalog-search">
      <input type="search" name="q" value="{{ search_term }}" placeholder="جستجوی نام محصول، برند یا کد ...">
      <button class="btn btn-outline" type="submit">جستجو</button>
    </form>

    <div class="products-grid">
      {% for product in featured_products %}
        <article class="product-card" data-href="{% url 'catalog_product' product.category.slug product.slug %}">
          <div class="product-image">
            {% if product.card_image_url %}
              <img src="{{ product.card_image_url }}" alt="{{ product.name }}" loading="lazy" decoding="async">
            {% else %}
              <picture>
                <source srcset="{% static 'img/product-placeholder.webp' %}" type="image/webp">
                <img src="{% static 'img/product-placeholder.jpg' %}" alt="{{ product.name }}" loading="lazy" decoding="async">
              </picture>
            {% endif %}
          </div>
          <div class="product-info">
            <h3>{{ product.name }}</h3>
            <p class="product-domain">{{ product.category.name }}</p>
            <p class="product-summary">{{ product.summary|default:"تجهیزات صنعتی با کیفیت و استاندارد." }}</p>
          </div>
          <div class="product-actions">
            <a href="{% url 'catalog_product' product.category.slug product.slug %}" class="btn btn-outline small">مشاهده جزئیات</a>
            <a href="{% url 'contact' %}?product={{ product.slug }}" class="btn btn-primary small">استعلام قیمت</a>
          </div>
        </article>
      {% empty %}
        <p class="empty-text">محصولی مطابق جستجو یافت نشد.</p>
      {% endfor %}
    </div>
  </div>
</section>
{% endblock %}
